
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>SCML Compliance Report &#8212; Keraunos PCIe Tile v1.0</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script>
mermaid.initialize({
    startOnLoad: true,
    theme: 'default',
    securityLevel: 'loose',
    flowchart: {
        useMaxWidth: true,
        htmlLabels: true,
        curve: 'basis',
        nodeSpacing: 70,
        rankSpacing: 70,
        padding: 20
    },
    fontSize: 16,
    themeVariables: {
        fontSize: '16px',
        primaryColor: '#e1f5ff',
        primaryTextColor: '#000',
        primaryBorderColor: '#3498db',
        lineColor: '#2c3e50',
        secondaryColor: '#fff4e1',
        tertiaryColor: '#ffe1f5'
    }
});
</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Keraunos PCIe Tile</a></h1>



<p class="blurb">SystemC/TLM2.0 PCIe Tile Design and Verification</p>






<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Design Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hld.html">Keraunos PCIe Tile - High-Level Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="systemc_design.html">Keraunos PCIE Tile SystemC/TLM2.0 Design Document</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Verification Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="testplan.html">Keraunos PCIE Tile SystemC/TLM2.0 Testplan</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="scml-compliance-report">
<h1>SCML Compliance Report<a class="headerlink" href="#scml-compliance-report" title="Permalink to this heading">¶</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="scml-compliance-report-for-keraunos-pcie-tile-implementation">
<h1>SCML Compliance Report for Keraunos PCIE Tile Implementation<a class="headerlink" href="#scml-compliance-report-for-keraunos-pcie-tile-implementation" title="Permalink to this heading">¶</a></h1>
<p><strong>Date:</strong> 2025-01-XX<br />
<strong>Reference Document:</strong> VZ_SCMLRef.md (SystemC Modeling Library Reference Manual X-2025.06-SP1)<br />
<strong>Implementation:</strong> Keraunos PCIE Tile SystemC/TLM2.0 Models</p>
<hr class="docutils" />
<section id="executive-summary">
<h2>Executive Summary<a class="headerlink" href="#executive-summary" title="Permalink to this heading">¶</a></h2>
<p>This report analyzes the SCML compliance of the Keraunos PCIE Tile SystemC/TLM2.0 implementation against the SCML2 reference manual. The implementation shows <strong>partial compliance</strong> with several areas requiring updates to fully align with SCML2 best practices.</p>
<p><strong>Overall Compliance Status:</strong> ⚠️ <strong>PARTIAL COMPLIANCE</strong> (60%)</p>
</section>
<hr class="docutils" />
<section id="compliance-analysis">
<h2>Compliance Analysis<a class="headerlink" href="#compliance-analysis" title="Permalink to this heading">¶</a></h2>
<section id="module-structure-compliant">
<h3>1. Module Structure ✅ COMPLIANT<a class="headerlink" href="#module-structure-compliant" title="Permalink to this heading">¶</a></h3>
<p><strong>Status:</strong> ✅ <strong>COMPLIANT</strong></p>
<p><strong>Analysis:</strong></p>
<ul class="simple">
<li><p>All modules correctly inherit from <code class="docutils literal notranslate"><span class="pre">sc_core::sc_module</span></code></p></li>
<li><p>Proper use of <code class="docutils literal notranslate"><span class="pre">SC_HAS_PROCESS</span></code> macro</p></li>
<li><p>Correct namespace usage (<code class="docutils literal notranslate"><span class="pre">scml2</span></code> namespace)</p></li>
</ul>
<p><strong>Evidence:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">TLBSysIn0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">sc_core</span><span class="o">::</span><span class="n">sc_module</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">SC_HAS_PROCESS</span><span class="p">(</span><span class="n">TLBSysIn0</span><span class="p">);</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>Reference:</strong> VZ_SCMLRef.md Section 8.1 (Modeling Guidelines)</p>
</section>
<hr class="docutils" />
<section id="socket-usage-partially-compliant">
<h3>2. Socket Usage ⚠️ PARTIALLY COMPLIANT<a class="headerlink" href="#socket-usage-partially-compliant" title="Permalink to this heading">¶</a></h3>
<p><strong>Status:</strong> ⚠️ <strong>PARTIALLY COMPLIANT</strong></p>
<p><strong>Analysis:</strong></p>
<section id="compliant-aspects">
<h4>✅ Compliant Aspects:<a class="headerlink" href="#compliant-aspects" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>Correct use of <code class="docutils literal notranslate"><span class="pre">scml2::target_socket&lt;32&gt;</span></code> for APB configuration interfaces</p></li>
<li><p>Correct use of <code class="docutils literal notranslate"><span class="pre">scml2::initiator_socket</span></code> would be appropriate for initiator ports (though currently using <code class="docutils literal notranslate"><span class="pre">tlm::tlm_initiator_socket</span></code>)</p></li>
</ul>
</section>
<section id="non-compliant-aspects">
<h4>❌ Non-Compliant Aspects:<a class="headerlink" href="#non-compliant-aspects" title="Permalink to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p><strong>TLM2.0 Sockets Instead of SCML Sockets:</strong></p>
<ul class="simple">
<li><p>Current implementation uses <code class="docutils literal notranslate"><span class="pre">tlm::tlm_target_socket&lt;64&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">tlm::tlm_initiator_socket&lt;64&gt;</span></code> for AXI interfaces</p></li>
<li><p>SCML recommends <code class="docutils literal notranslate"><span class="pre">scml2::target_socket</span></code> and <code class="docutils literal notranslate"><span class="pre">scml2::initiator_socket</span></code> for LT coding style</p></li>
<li><p>However, this is acceptable if using pure TLM2.0 style</p></li>
</ul>
</li>
<li><p><strong>Manual Transport Method Registration:</strong></p>
<ul class="simple">
<li><p>Current: <code class="docutils literal notranslate"><span class="pre">inbound_socket.register_b_transport(this,</span> <span class="pre">&amp;TLBSysIn0::b_transport);</span></code></p></li>
<li><p>SCML approach: Use port adapters to bind memory objects to sockets</p></li>
</ul>
</li>
</ol>
<p><strong>Reference:</strong> VZ_SCMLRef.md Section 3.2.2 (Sockets), Section 8.1.2</p>
<p><strong>Recommendation:</strong></p>
<ul class="simple">
<li><p>For pure TLM2.0 style: Current approach is acceptable</p></li>
<li><p>For SCML style: Use <code class="docutils literal notranslate"><span class="pre">scml2::target_socket</span></code> with port adapters</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="memory-object-usage-non-compliant">
<h3>3. Memory Object Usage ❌ NON-COMPLIANT<a class="headerlink" href="#memory-object-usage-non-compliant" title="Permalink to this heading">¶</a></h3>
<p><strong>Status:</strong> ❌ <strong>NON-COMPLIANT</strong></p>
<p><strong>Critical Issue:</strong> Memory objects are not properly bound to sockets using port adapters.</p>
<p><strong>Current Implementation:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// In header</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">memory</span><span class="o">&lt;</span><span class="kt">uint64_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">tlb_memory_</span><span class="p">;</span>

<span class="c1">// In constructor</span>
<span class="n">tlb_memory_</span><span class="p">(</span><span class="s">&quot;tlb_memory&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>

<span class="c1">// Manual TLM transport methods used instead</span>
<span class="n">inbound_socket</span><span class="p">.</span><span class="n">register_b_transport</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">TLBSysIn0</span><span class="o">::</span><span class="n">b_transport</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>SCML Requirement (from VZ_SCMLRef.md Section 2.2.1):</strong></p>
<blockquote>
<div><p>“An scml2::memory can be bound to a target socket using a port_adapter.”</p>
</div></blockquote>
<p><strong>SCML-Compliant Approach:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Header</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">target_socket</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config_socket</span><span class="p">;</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">tlm2_gp_target_adapter</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mAdapter</span><span class="p">;</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">memory</span><span class="o">&lt;</span><span class="kt">uint64_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">tlb_memory_</span><span class="p">;</span>

<span class="c1">// Constructor</span>
<span class="n">TLBSysIn0</span><span class="p">(</span><span class="n">sc_core</span><span class="o">::</span><span class="n">sc_module_name</span><span class="w"> </span><span class="n">name</span><span class="p">)</span>
<span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="n">sc_module</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="n">mAdapter</span><span class="p">(</span><span class="s">&quot;adapter&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="n">tlb_memory_</span><span class="p">(</span><span class="s">&quot;tlb_memory&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">mAdapter</span><span class="p">(</span><span class="n">config_socket</span><span class="p">);</span><span class="w">  </span><span class="c1">// Bind adapter to socket</span>
<span class="w">    </span><span class="n">mAdapter</span><span class="p">(</span><span class="n">tlb_memory_</span><span class="p">);</span><span class="w">     </span><span class="c1">// Bind adapter to memory</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Reference:</strong> VZ_SCMLRef.md Section 2.2.1, Section 8.1.4, Section 2.9.3</p>
<p><strong>Impact:</strong></p>
<ul class="simple">
<li><p>Memory objects exist but are not integrated with SCML’s transaction routing</p></li>
<li><p>Manual TLM transport bypasses SCML’s automatic transaction handling</p></li>
<li><p>Missing benefits: automatic DMI handling, callback support, watchpoint support</p></li>
</ul>
<p><strong>Recommendation:</strong></p>
<ul class="simple">
<li><p><strong>HIGH PRIORITY:</strong> Implement port adapters for configuration socket + memory binding</p></li>
<li><p>For TLB translation logic (passthrough), manual TLM transport is acceptable</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="msi-relay-unit-memory-non-compliant">
<h3>4. MSI Relay Unit Memory ❌ NON-COMPLIANT<a class="headerlink" href="#msi-relay-unit-memory-non-compliant" title="Permalink to this heading">¶</a></h3>
<p><strong>Status:</strong> ❌ <strong>NON-COMPLIANT</strong></p>
<p><strong>Current Implementation:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">scml2</span><span class="o">::</span><span class="n">memory</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">csr_memory_</span><span class="p">(</span><span class="s">&quot;csr_memory&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>

<span class="c1">// Manual transport methods</span>
<span class="n">tlm</span><span class="o">::</span><span class="n">tlm_sync_enum</span><span class="w"> </span><span class="nf">csr_b_transport</span><span class="p">(</span><span class="n">tlm</span><span class="o">::</span><span class="n">tlm_generic_payload</span><span class="o">&amp;</span><span class="w"> </span><span class="n">trans</span><span class="p">,</span><span class="w"> </span><span class="p">...);</span>
</pre></div>
</div>
<p><strong>Issue:</strong></p>
<ul class="simple">
<li><p>Memory object created but not bound to socket via port adapter</p></li>
<li><p>Manual transport methods bypass SCML’s memory access mechanisms</p></li>
</ul>
<p><strong>SCML-Compliant Approach:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">scml2</span><span class="o">::</span><span class="n">target_socket</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">csr_apb_socket</span><span class="p">;</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">tlm2_gp_target_adapter</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">csr_adapter</span><span class="p">;</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">memory</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">csr_memory_</span><span class="p">;</span>

<span class="c1">// Constructor</span>
<span class="n">csr_adapter</span><span class="p">(</span><span class="s">&quot;csr_adapter&quot;</span><span class="p">);</span>
<span class="n">csr_adapter</span><span class="p">(</span><span class="n">csr_apb_socket</span><span class="p">);</span>
<span class="n">csr_adapter</span><span class="p">(</span><span class="n">csr_memory_</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Reference:</strong> VZ_SCMLRef.md Section 2.2.1, Section 8.1.4</p>
<p><strong>Recommendation:</strong></p>
<ul class="simple">
<li><p><strong>HIGH PRIORITY:</strong> Bind CSR memory to socket using port adapter</p></li>
<li><p>Use SCML register/bitfield objects for structured register access</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="register-modeling-not-implemented">
<h3>5. Register Modeling ❌ NOT IMPLEMENTED<a class="headerlink" href="#register-modeling-not-implemented" title="Permalink to this heading">¶</a></h3>
<p><strong>Status:</strong> ❌ <strong>NOT IMPLEMENTED</strong></p>
<p><strong>Current Approach:</strong></p>
<ul class="simple">
<li><p>MSI Relay Unit uses manual register access in <code class="docutils literal notranslate"><span class="pre">b_transport</span></code> methods</p></li>
<li><p>No use of <code class="docutils literal notranslate"><span class="pre">scml2::reg</span></code> or <code class="docutils literal notranslate"><span class="pre">scml2::bitfield</span></code> objects</p></li>
</ul>
<p><strong>SCML Approach:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">scml2</span><span class="o">::</span><span class="n">memory</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">csr_memory_</span><span class="p">;</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">reg</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">msi_receiver_reg</span><span class="p">;</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">reg</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">msi_outstanding_reg</span><span class="p">;</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">reg</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">msix_pba_reg</span><span class="p">;</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">reg</span><span class="o">&lt;</span><span class="kt">uint64_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">msix_table_reg</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

<span class="c1">// In constructor</span>
<span class="n">msi_receiver_reg</span><span class="p">(</span><span class="s">&quot;msi_receiver&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">csr_memory_</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0000</span><span class="p">);</span>
<span class="n">msi_outstanding_reg</span><span class="p">(</span><span class="s">&quot;msi_outstanding&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">csr_memory_</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0004</span><span class="p">);</span>
<span class="n">msix_pba_reg</span><span class="p">(</span><span class="s">&quot;msix_pba&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">csr_memory_</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1000</span><span class="p">);</span>
<span class="c1">// etc.</span>
</pre></div>
</div>
<p><strong>Benefits of SCML Registers:</strong></p>
<ul class="simple">
<li><p>Automatic read/write callbacks</p></li>
<li><p>Watchpoint support for debugging</p></li>
<li><p>Structured access control</p></li>
<li><p>Coverage support</p></li>
</ul>
<p><strong>Reference:</strong> VZ_SCMLRef.md Section 2.5 (reg), Section 2.6 (bitfield)</p>
<p><strong>Recommendation:</strong></p>
<ul class="simple">
<li><p><strong>MEDIUM PRIORITY:</strong> Refactor MSI Relay Unit to use <code class="docutils literal notranslate"><span class="pre">scml2::reg</span></code> objects</p></li>
<li><p>Provides better debugging and verification support</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="initiator-socket-usage-partially-compliant">
<h3>6. Initiator Socket Usage ⚠️ PARTIALLY COMPLIANT<a class="headerlink" href="#initiator-socket-usage-partially-compliant" title="Permalink to this heading">¶</a></h3>
<p><strong>Status:</strong> ⚠️ <strong>PARTIALLY COMPLIANT</strong></p>
<p><strong>Current Implementation:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">tlm</span><span class="o">::</span><span class="n">tlm_initiator_socket</span><span class="o">&lt;</span><span class="mi">64</span><span class="o">&gt;</span><span class="w"> </span><span class="n">translated_socket</span><span class="p">;</span>
<span class="n">tlm</span><span class="o">::</span><span class="n">tlm_initiator_socket</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">msi_axi_socket</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>SCML Recommendation:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">scml2</span><span class="o">::</span><span class="n">initiator_socket</span><span class="o">&lt;</span><span class="mi">64</span><span class="o">&gt;</span><span class="w"> </span><span class="n">translated_socket</span><span class="p">;</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">initiator_socket</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">msi_axi_socket</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Benefits of <code class="docutils literal notranslate"><span class="pre">scml2::initiator_socket</span></code>:</strong></p>
<ul class="simple">
<li><p>Built-in DMI handler</p></li>
<li><p>Quantum keeper support</p></li>
<li><p>Simplified read/write APIs</p></li>
<li><p>Implements <code class="docutils literal notranslate"><span class="pre">mappable_if</span></code> for router compatibility</p></li>
</ul>
<p><strong>Reference:</strong> VZ_SCMLRef.md Section 3.2.2, Section 8.1.2</p>
<p><strong>Recommendation:</strong></p>
<ul class="simple">
<li><p><strong>LOW PRIORITY:</strong> Consider migrating to <code class="docutils literal notranslate"><span class="pre">scml2::initiator_socket</span></code> for better SCML integration</p></li>
<li><p>Current TLM2.0 sockets are functionally correct</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="header-files-compliant">
<h3>7. Header Files ✅ COMPLIANT<a class="headerlink" href="#header-files-compliant" title="Permalink to this heading">¶</a></h3>
<p><strong>Status:</strong> ✅ <strong>COMPLIANT</strong></p>
<p><strong>Analysis:</strong></p>
<ul class="simple">
<li><p>Correct inclusion of <code class="docutils literal notranslate"><span class="pre">&lt;scml2.h&gt;</span></code> or specific headers</p></li>
<li><p>Proper SystemC and TLM2.0 headers included</p></li>
<li><p>Correct namespace usage</p></li>
</ul>
<p><strong>Evidence:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;scml2.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;systemc&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;tlm&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sc_dt.h&gt;</span>
</pre></div>
</div>
<p><strong>Reference:</strong> VZ_SCMLRef.md Section 1.2</p>
</section>
<hr class="docutils" />
<section id="namespace-usage-compliant">
<h3>8. Namespace Usage ✅ COMPLIANT<a class="headerlink" href="#namespace-usage-compliant" title="Permalink to this heading">¶</a></h3>
<p><strong>Status:</strong> ✅ <strong>COMPLIANT</strong></p>
<p><strong>Analysis:</strong></p>
<ul class="simple">
<li><p>Proper use of <code class="docutils literal notranslate"><span class="pre">scml2</span></code> namespace for SCML objects</p></li>
<li><p>Proper use of <code class="docutils literal notranslate"><span class="pre">sc_core</span></code> namespace for SystemC objects</p></li>
<li><p>Proper use of <code class="docutils literal notranslate"><span class="pre">tlm</span></code> namespace for TLM2.0 objects</p></li>
</ul>
<p><strong>Reference:</strong> VZ_SCMLRef.md Section 8.1.1</p>
</section>
</section>
<hr class="docutils" />
<section id="summary-of-issues">
<h2>Summary of Issues<a class="headerlink" href="#summary-of-issues" title="Permalink to this heading">¶</a></h2>
<section id="critical-issues-must-fix">
<h3>Critical Issues (Must Fix)<a class="headerlink" href="#critical-issues-must-fix" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>Memory Binding:</strong> <code class="docutils literal notranslate"><span class="pre">scml2::memory</span></code> objects not bound to sockets via port adapters</p>
<ul class="simple">
<li><p><strong>Files Affected:</strong> All TLB modules, MSI Relay Unit</p></li>
<li><p><strong>Impact:</strong> Missing SCML transaction routing, callbacks, DMI support</p></li>
</ul>
</li>
<li><p><strong>Port Adapter Missing:</strong> No <code class="docutils literal notranslate"><span class="pre">scml2::tlm2_gp_target_adapter</span></code> usage</p>
<ul class="simple">
<li><p><strong>Files Affected:</strong> All modules with <code class="docutils literal notranslate"><span class="pre">scml2::target_socket</span></code></p></li>
<li><p><strong>Impact:</strong> Manual TLM transport bypasses SCML infrastructure</p></li>
</ul>
</li>
</ol>
</section>
<section id="medium-priority-issues">
<h3>Medium Priority Issues<a class="headerlink" href="#medium-priority-issues" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>Register Modeling:</strong> Manual register access instead of <code class="docutils literal notranslate"><span class="pre">scml2::reg</span></code> objects</p>
<ul class="simple">
<li><p><strong>Files Affected:</strong> <code class="docutils literal notranslate"><span class="pre">keraunos_pcie_msi_relay.cpp</span></code></p></li>
<li><p><strong>Impact:</strong> Missing watchpoint support, structured access</p></li>
</ul>
</li>
<li><p><strong>Initiator Sockets:</strong> Using TLM2.0 sockets instead of SCML sockets</p>
<ul class="simple">
<li><p><strong>Files Affected:</strong> All modules</p></li>
<li><p><strong>Impact:</strong> Missing DMI handler, quantum keeper integration</p></li>
</ul>
</li>
</ol>
</section>
<section id="low-priority-issues">
<h3>Low Priority Issues<a class="headerlink" href="#low-priority-issues" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>Quantum Keeper:</strong> Not implemented for initiator sockets</p>
<ul class="simple">
<li><p><strong>Impact:</strong> Missing temporal decoupling support</p></li>
<li><p><strong>Reference:</strong> VZ_SCMLRef.md Section 8.1.3</p></li>
</ul>
</li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="compliance-recommendations">
<h2>Compliance Recommendations<a class="headerlink" href="#compliance-recommendations" title="Permalink to this heading">¶</a></h2>
<section id="immediate-actions-high-priority">
<h3>Immediate Actions (High Priority)<a class="headerlink" href="#immediate-actions-high-priority" title="Permalink to this heading">¶</a></h3>
<ol class="arabic">
<li><p><strong>Add Port Adapters for Configuration Sockets:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// For each TLB module</span>
<span class="n">scml2</span><span class="o">::</span><span class="n">tlm2_gp_target_adapter</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">config_adapter</span><span class="p">;</span>

<span class="c1">// In constructor</span>
<span class="n">config_adapter</span><span class="p">(</span><span class="s">&quot;config_adapter&quot;</span><span class="p">);</span>
<span class="n">config_adapter</span><span class="p">(</span><span class="n">config_socket</span><span class="p">);</span>
<span class="n">config_adapter</span><span class="p">(</span><span class="n">tlb_memory_</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><strong>Bind MSI Relay CSR Memory:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">scml2</span><span class="o">::</span><span class="n">tlm2_gp_target_adapter</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;</span><span class="w"> </span><span class="n">csr_adapter</span><span class="p">;</span>

<span class="c1">// In constructor</span>
<span class="n">csr_adapter</span><span class="p">(</span><span class="s">&quot;csr_adapter&quot;</span><span class="p">);</span>
<span class="n">csr_adapter</span><span class="p">(</span><span class="n">csr_apb_socket</span><span class="p">);</span>
<span class="n">csr_adapter</span><span class="p">(</span><span class="n">csr_memory_</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="medium-term-actions">
<h3>Medium-Term Actions<a class="headerlink" href="#medium-term-actions" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>Refactor MSI Relay Registers:</strong></p>
<ul class="simple">
<li><p>Replace manual register access with <code class="docutils literal notranslate"><span class="pre">scml2::reg</span></code> objects</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">scml2::bitfield</span></code> for individual register fields</p></li>
</ul>
</li>
<li><p><strong>Consider SCML Initiator Sockets:</strong></p>
<ul class="simple">
<li><p>Evaluate migration to <code class="docutils literal notranslate"><span class="pre">scml2::initiator_socket</span></code></p></li>
<li><p>Add quantum keeper if temporal decoupling needed</p></li>
</ul>
</li>
</ol>
</section>
<section id="long-term-enhancements">
<h3>Long-Term Enhancements<a class="headerlink" href="#long-term-enhancements" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>Add Callbacks:</strong></p>
<ul class="simple">
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">scml2::memory_callback_base</span></code> for custom behavior</p></li>
<li><p>Use callbacks for TLB translation logic</p></li>
</ul>
</li>
<li><p><strong>Add Coverage Support:</strong></p>
<ul class="simple">
<li><p>Use SCML coverage APIs for verification</p></li>
<li><p>Implement coverage points for TLB entries</p></li>
</ul>
</li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="compliance-scorecard">
<h2>Compliance Scorecard<a class="headerlink" href="#compliance-scorecard" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Category</p></th>
<th class="head"><p>Status</p></th>
<th class="head"><p>Score</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Module Structure</p></td>
<td><p>✅ Compliant</p></td>
<td><p>100%</p></td>
<td><p>Correct inheritance and macros</p></td>
</tr>
<tr class="row-odd"><td><p>Socket Usage</p></td>
<td><p>⚠️ Partial</p></td>
<td><p>60%</p></td>
<td><p>SCML sockets not used for AXI</p></td>
</tr>
<tr class="row-even"><td><p>Memory Binding</p></td>
<td><p>❌ Non-Compliant</p></td>
<td><p>0%</p></td>
<td><p>Missing port adapters</p></td>
</tr>
<tr class="row-odd"><td><p>Register Modeling</p></td>
<td><p>❌ Not Implemented</p></td>
<td><p>0%</p></td>
<td><p>Manual access instead of reg objects</p></td>
</tr>
<tr class="row-even"><td><p>Header Files</p></td>
<td><p>✅ Compliant</p></td>
<td><p>100%</p></td>
<td><p>Correct includes</p></td>
</tr>
<tr class="row-odd"><td><p>Namespace Usage</p></td>
<td><p>✅ Compliant</p></td>
<td><p>100%</p></td>
<td><p>Proper namespaces</p></td>
</tr>
<tr class="row-even"><td><p><strong>Overall</strong></p></td>
<td><p><strong>⚠️ Partial</strong></p></td>
<td><p><strong>60%</strong></p></td>
<td><p><strong>Core structure good, binding missing</strong></p></td>
</tr>
</tbody>
</table>
</section>
<hr class="docutils" />
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this heading">¶</a></h2>
<p>The Keraunos PCIE Tile implementation demonstrates a <strong>solid understanding of SystemC/TLM2.0</strong> and follows many SCML conventions. However, it <strong>does not fully leverage SCML’s infrastructure</strong> for memory and register modeling.</p>
<p><strong>Key Strengths:</strong></p>
<ul class="simple">
<li><p>✅ Correct module structure</p></li>
<li><p>✅ Proper use of SCML namespaces</p></li>
<li><p>✅ Functional TLM2.0 implementation</p></li>
</ul>
<p><strong>Key Weaknesses:</strong></p>
<ul class="simple">
<li><p>❌ Missing port adapters for memory binding</p></li>
<li><p>❌ Manual register access instead of SCML reg objects</p></li>
<li><p>❌ Not using SCML’s automatic transaction routing</p></li>
</ul>
<p><strong>Recommendation:</strong>
To achieve <strong>full SCML compliance</strong>, implement port adapters for memory binding and consider migrating to SCML register objects. The current implementation is <strong>functionally correct</strong> but misses SCML’s advanced features for debugging, verification, and tool integration.</p>
</section>
<hr class="docutils" />
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>VZ_SCMLRef.md - SystemC Modeling Library Reference Manual X-2025.06-SP1</p></li>
<li><p>Section 2.2.1 - Transaction Routing From Socket to Memories</p></li>
<li><p>Section 2.5 - reg (Register Objects)</p></li>
<li><p>Section 2.9.3 - tlm2_gp_target_adapter</p></li>
<li><p>Section 8.1 - Modeling Guidelines</p></li>
</ol>
<hr class="docutils" />
<p><strong>Report End</strong></p>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2026, Keraunos PCIe Tile Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/scml_compliance_report.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>